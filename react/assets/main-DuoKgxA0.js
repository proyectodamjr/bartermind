import{j as e,r as c,c as j,R as f}from"./client-BSvFEBJr.js";/* empty css               */import"./main-C8S0xNe-.js";import{s as i}from"./sweetalert.min-BWbkhnVz.js";const x=({videoUrl:a})=>e.jsx("div",{className:"video-wrapper",children:e.jsx("video",{className:"video-player",controls:!0,children:e.jsx("source",{src:a,type:"video/mp4"})})}),y=()=>{const[a,d]=c.useState([]),[m,u]=c.useState([]);c.useEffect(()=>{const r=async()=>{try{const n=(await(await fetch("/api/videos")).json()).videos.map(l=>({...l,enlace:`./uploads/${l.enlace}`}));d(n)}catch(s){console.error("Error fetching videos:",s)}},o=async()=>{try{const t=await(await fetch("/api/user")).json();u(t)}catch(s){console.error("Error fetching user data:",s)}};r(),o()},[]);const p=async r=>{try{const o=await fetch("/api/comentarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({comentario:"Quiere hacer un Trueque contigo!",idCurso:r.idCurso,usuarios_id:r.usuarios_id,comentarista_id1:1,video_id:r.id})}),s=await o.json();o.ok?i("¡Trueque enviado!","El comentario se ha enviado correctamente.","success"):i("Error",s.message,"error")}catch(o){console.error("Error inserting comment:",o),i("Error","No se pudo enviar el comentario.","error")}},h=async r=>{try{const o=await fetch("/api/eliminarVideo",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({comentario:"Tu video ha sido eliminado por un administrador",idCurso:r.idCurso,usuarios_id:r.usuarios_id,comentarista_id1:1,video_id:r.id})}),s=await o.json();o.ok?(d(t=>t.filter(n=>n.id!==r.id)),i("¡Video eliminado!","El video ha sido eliminado correctamente.","success")):i("Error",s.message,"error")}catch(o){console.error("Error deleting video:",o),i("Error","No se pudo eliminar el video.","error")}};return e.jsx("div",{className:"container d-flex flex-column",children:a.map(r=>e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-8 col-lg-8 ",children:e.jsx("div",{className:"video-item w-100 d-flex flex-column justify-content-end mb-4 position-relative",children:e.jsx(x,{videoUrl:r.enlace})},r.id)}),e.jsxs("div",{className:"col-12 col-md-4 col-lg-4 mb-4",children:[e.jsx("h5",{children:r.titulo}),e.jsx("button",{className:"btn btn-primary",onClick:()=>p(r),children:"Trueque"}),e.jsx("br",{}),m.admin==="S"&&e.jsx("button",{className:"btn btn-danger mt-1",onClick:()=>h(r),children:"Eliminar"})]})]}))})};function E(){return e.jsx("div",{className:"container-videos",children:e.jsx(y,{})})}j.createRoot(document.getElementById("rootVideo")).render(e.jsx(f.StrictMode,{children:e.jsx(E,{})}));
