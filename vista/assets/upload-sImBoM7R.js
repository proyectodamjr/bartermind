import{r as s,j as e,s as m,c as f,R as y}from"./sweetalert.min-DNEjjZ1c.js";const b=({setCategory:n})=>{const[l,i]=s.useState([]),[p,o]=s.useState(""),d=async()=>{try{const c=await(await fetch("/categorias",{method:"POST",headers:{"Content-Type":"application/json"}})).json();i(c.results)}catch(t){console.error("Error fetching data:",t)}};s.useEffect(()=>{d()},[]);const r=t=>{o(t.target.value),n(t.target.value)};return e.jsx("div",{className:"input-wrapper",children:e.jsxs("select",{value:p,onChange:r,children:[e.jsx("option",{value:"",children:"Seleccione una opción"}),l.map(t=>e.jsx("option",{value:t.nombre,children:t.nombre},t.id))]})})},v=({setCurso:n})=>{const[l,i]=s.useState([]),[p,o]=s.useState(""),d=async()=>{try{const c=await(await fetch("/dropdownCursos",{method:"POST",headers:{"Content-Type":"application/json"}})).json();i(c.results)}catch(t){console.error("Error fetching data:",t)}};s.useEffect(()=>{d()},[]);const r=t=>{o(t.target.value),n(t.target.value)};return e.jsx("div",{className:"input-wrapper",children:e.jsxs("select",{value:p,onChange:r,children:[e.jsx("option",{value:"",children:"Seleccione una opción"}),l.map(t=>e.jsx("option",{value:t.nombre,children:t.nombre},t.id))]})})},S=()=>{const[n,l]=s.useState(null),[i,p]=s.useState(""),[o,d]=s.useState(""),[r,t]=s.useState(""),[c,h]=s.useState(""),x=a=>{l(a.target.files[0])},g=async()=>{if(!n)return;const a=new FormData;a.append("file",n),a.append("caption",o),a.append("category",r),a.append("curso",c);try{const j=await(await fetch("/api/users/upload",{method:"POST",body:a})).json();m({title:"Subida exitosa!",text:j.message,icon:"success"}).then(()=>{window.location.href="/perfil.html"})}catch(u){console.error(u),m({title:"Error",text:data.message,icon:"error"})}};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 max-w-sm",children:[e.jsxs("div",{class:"mt-3",children:[e.jsx("label",{htmlFor:"file",className:"block text-sm font-medium text-gray-700",children:"Video"}),e.jsx("input",{type:"file",id:"file",name:"file",onChange:x,className:"focus:ring-indigo-500 focus:border-indigo-500 rounded-md sm:text-sm px-3 py-2 border border-gray-300"})]}),e.jsxs("div",{class:"mt-3",children:[e.jsx("label",{htmlFor:"caption",className:"block text-sm font-medium text-gray-700",children:"Título"}),e.jsx("input",{type:"text",id:"caption",name:"caption",value:o,onChange:a=>d(a.target.value),placeholder:"Título",className:"focus:ring-indigo-500 focus:border-indigo-500 rounded-md sm:text-sm px-3 py-2 border border-gray-300"})]}),e.jsxs("div",{class:"mt-3",children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Categoría"}),e.jsx(b,{setCategory:t})]}),e.jsxs("div",{class:"mt-3",children:[e.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-gray-700",children:"Curso"}),e.jsx(v,{setCurso:h})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:g,disabled:!n||!o||!r||!c,class:"btn btn-outline-primary mt-3",children:"Upload"}),e.jsx("a",{class:"btn btn-outline-danger mt-3 ms-3",href:"/perfil.html",children:"Cancelar"})]})]}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-500",children:i})})]})};function C(){return e.jsx("div",{class:"container",children:e.jsx("div",{class:"row justify-content-center",children:e.jsx(S,{})})})}f.createRoot(document.getElementById("uploadVideo")).render(e.jsx(y.StrictMode,{children:e.jsx(C,{})}));
